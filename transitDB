--By Will Nguyen, Austin Green, Michael Ngo, Collin Kong
--Dropping tables
DROP TABLE EMPLOYEE;
DROP TABLE DRIVER;
DROP TABLE BUS;
DROP TABLE BUS_ROUTE;
DROP TABLE BASE;
DROP TABLE BUS_ROUTE_STOPS;
DROP TABLE PARK_AND_RIDE;
DROP TABLE TRANS;
DROP TABLE TRANSIT_CARD;

--Employee TABLE
CREATE TABLE EMPLOYEE(
    ID INT NOT NULL,
    Ssn VARCHAR(10) NOT NULL,
    E_Name VARCHAR (30) NOT NULL,


    PRIMARY KEY(ID),
    CONSTRAINT ID_range CHECK(ID >= 0),
    CONSTRAINT Ssn_range CHECK(Ssn = 10),
    CONSTRAINT Name_range CHECK(E_Name <= 3 AND E_Name <= 30)
);

--Driver TABLE
CREATE TABLE DRIVER(
    Employee_ID INT NOT NULL,
    Driver_ID INT NOT NULL,
    Miles_Driven INT NOT NULL,
    PRIMARY KEY(Employee_ID,Driver_ID),
    FOREIGN KEY(Employee_ID) REFERENCES EMPLOYEE(ID),
    CONSTRAINT E_ID_range CHECK(Employee_ID >= 1000000 AND Employee_ID <= 9999999),
    CONSTRAINT D_ID_range CHECK(Driver_ID >= 1000000 AND Driver_ID <= 9999999),
    CONSTRAINT Mile_min CHECK(Miles_Driven >= 0)    
);

--Bus TABLE
CREATE TABLE BUS(
    Bus_number INT NOT NULL,
    Driver_ID INT NOT NULL,
    To_name VARCHAR(30) NULL,
    From_name VARCHAR(30) NULL,
    Route_number VARCHAR(30) NULL,
    Bus_model VARCHAR(30) NULL,
    Seats_available INT NOT NULL,
    Miles INT NOT NULL,
    Base_address VARCHAR(30),

    PRIMARY KEY(Bus_number, Driver_ID, Base_address),
    FOREIGN KEY(Driver_ID) REFERENCES DRIVER(Driver_ID),
    FOREIGN KEY(Base_address) REFERENCES BASE(Base_address),

    CONSTRAINT Bus_range CHECK (Bus_number >= 0 AND Bus_number <= 9999999),
    CONSTRAINT D_ID_range CHECK(Driver_ID >= 1000000 AND Driver_ID <= 9999999),
    CONSTRAINT To_range CHECK(To_name >= 3 AND To_name <= 30),
    CONSTRAINT From_range CHECK(From_name >= 3 AND From_name <=30),
    CONSTRAINT Route_range CHECK(Route_number >= 3 AND Route_number <= 30),
    CONSTRAINT Model_range CHECK(Bus_model >=3 AND Bus_model <= 30),
    CONSTRAINT Seats_range CHECK(Seats_available >= 10 AND Seats_available <=100),
    CONSTRAINT Mile_range CHECK(Miles >= 0)    
);

--Bus Route Table
CREATE TABLE BUS_ROUTE(
    To_name VARCHAR(30) NULL,
    From_name VARCHAR(30) NULL,
    Route_number VARCHAR(30) NULL,
    Days_of_operation VARCHAR(2) DEFAULT 'mo',
    PRIMARY KEY(To_name, From_name, Route_number),


    CONSTRAINT To_range CHECK(To_name >= 3 AND To_name <= 30),
    CONSTRAINT From_range CHECK(From_name >= 3 AND From_name <=30),
    CONSTRAINT Route_range CHECK(Route_number >= 3 AND Route_number <= 30),
    CONSTRAINT Days_range CHECK(Days_of_operation IN('mo', 'tu', 'we', 'th', 'fr', 'sa', 'su'))
);

--Base Table
CREATE TABLE BASE(
    Base_address VARCHAR(30) NOT NULL,
    Base_name VARCHAR(30) NOT NULL,
    Parking_spots INT NOT NULL,
    PRIMARY KEY(Base_address, Base_name),
    CONSTRAINT address_range CHECK(Base_address >= 3 AND Base_address <= 30),
    CONSTRAINT name_range CHECK(Base_name >= 3 AND Base_name <= 30),
    CONSTRAINT parking_range CHECK(Parking_spots >= 0)
);

--Bus Stop Table
--CREATE TABLE BUS_STOP();


/*
-- Room
-- (roomNo, H_hotelNo, type, price)
CREATE TABLE ROOM (
    roomNo INT NOT NULL, 
    H_hotelNo INT NOT NULL,
    roomType VARCHAR(10) DEFAULT 'Standard',
    price decimal(5,2) NOT NULL,
	primary key(roomNo, H_hotelNo),
	CONSTRAINT fkHotelNo FOREIGN key (H_hotelNo) References HOTEL (hotelNo),
	CONSTRAINT price_range CHECK (price BETWEEN 50.00 and 500.00),
	CONSTRAINT roomNo_range CHECK (roomNo BETWEEN 1 and 9999),
	CONSTRAINT roomTypes CHECK (roomType IN('Standard', 'Suite', 'Penthouse', 'Double', 'Single'))
);

*/